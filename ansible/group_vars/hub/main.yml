# URL’ы и внешние адреса
external_url_prometheus: "https://prom.vpn-for-friends.com"
external_url_alerts: "https://alerts.vpn-for-friends.com"

# Grafana admin (в vault)
grafana_admin_user: "admin"

nginx_sites_available_dir: /etc/nginx/sites-available
nginx_sites_enabled_dir:  /etc/nginx/sites-enabled

# Домены
prom_domain:    "prom.vpn-for-friends.com"
grafana_domain: "grafana.vpn-for-friends.com"
alerts_domain:  "alerts.vpn-for-friends.com"

# Порты бэкендов (host network у сервисов уже включён)
prometheus_port: 9090
grafana_port:    3000
alertmanager_port: 9093

hub_wg_ip: "10.77.0.1"
hub_public_endpoint: "wg-hub.vpn-for-friends.com"
hub_wg_pubkey: "{{ lookup('file', '/etc/wireguard/{{ wg_iface }}.pub') | default('', true) }}"

# Basic auth (лучше держать в vault)
nginx_basic_auth_enabled: true
nginx_users:
  - user: "admin"

# (опц.) allow-list. Пустой список = не включаем.
nginx_allow_list: []     # пример: ["203.0.113.4", "198.51.100.0/24"]

# Сертификаты: choose one of [existing, certbot]
nginx_cert_method: "certbot"

# Для existing — указываем пути:
nginx_certs:
  prom:
    fullchain: "/etc/letsencrypt/live/prom-new.vpn-for-friends.com/fullchain.pem"
    privkey:   "/etc/letsencrypt/live/prom-new.vpn-for-friends.com/privkey.pem"
  grafana:
    fullchain: "/etc/letsencrypt/live/grafana-new.vpn-for-friends.com/fullchain.pem"
    privkey:   "/etc/letsencrypt/live/grafana-new.vpn-for-friends.com/privkey.pem"
  alerts:
    fullchain: "/etc/letsencrypt/live/alerts-new.vpn-for-friends.com/fullchain.pem"
    privkey:   "/etc/letsencrypt/live/alerts-new.vpn-for-friends.com/privkey.pem"

# Для certbot:
certbot_email: "admin@vpn-for-friends.com"
certbot_staging: false      # true — для теста

# Поведение заливки дашбордов (rsync удаляет лишние файлы на целевом хосте)
grafana_dashboards_use_rsync: true

# Alertmanager -> Telegram
am_telegram_api_url: "https://api.telegram.org"
am_telegram_parse_mode: ""                # можно "MarkdownV2" или "HTML"
am_telegram_send_resolved: true

am_global_resolve_timeout: "5m"

am_route_group_by: ['alertname','instance']
am_route_group_wait: "30s"
am_route_group_interval: "5m"
am_route_repeat_interval: "5h"
