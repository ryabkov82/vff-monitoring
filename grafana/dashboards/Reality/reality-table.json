{"annotations": {"list": [{"builtIn": 1, "datasource": {"type": "grafana", "uid": "-- Grafana --"}, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard"}]}, "editable": true, "fiscalYearStartMonth": 0, "graphTooltip": 0, "links": [], "panels": [{"datasource": "Prometheus", "fieldConfig": {"defaults": {"custom": {"align": "auto", "cellOptions": {"type": "auto"}, "inspect": false}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": [{"matcher": {"id": "byName", "options": "Status"}, "properties": [{"id": "mappings", "value": [{"options": {"0": {"text": "DOWN"}, "1": {"text": "UP"}}, "type": "value"}]}, {"id": "thresholds", "value": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}, {"id": "custom.width", "value": 81}]}, {"matcher": {"id": "byName", "options": "Last update age (s)"}, "properties": [{"id": "unit", "value": "s"}]}, {"matcher": {"id": "byName", "options": "Uptime (s)"}, "properties": [{"id": "unit", "value": "s"}]}, {"matcher": {"id": "byName", "options": "Name"}, "properties": [{"id": "custom.width", "value": 253}]}, {"matcher": {"id": "byName", "options": "Restarts last 1h"}, "properties": [{"id": "custom.width", "value": 122}]}]}, "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0}, "id": 1, "options": {"cellHeight": "sm", "footer": {"countRows": false, "fields": "", "reducer": ["sum"], "show": false}, "showHeader": true, "sortBy": []}, "pluginVersion": "10.4.5", "targets": [{"datasource": "Prometheus", "expr": "reality:svc:up{name=~\"$name\"}", "format": "table", "instant": true, "refId": "A"}, {"datasource": "Prometheus", "expr": "reality:svc:last_update_age_seconds{name=~\"$name\"}", "format": "table", "instant": true, "refId": "B"}, {"datasource": "Prometheus", "expr": "reality:svc:restarts_1h{name=~\"$name\"}", "format": "table", "instant": true, "refId": "C"}, {"datasource": "Prometheus", "expr": "reality:svc:uptime_seconds{name=~\"$name\"}", "format": "table", "instant": true, "refId": "D"}], "title": "REALITY service (container + xray) status", "transformations": [{"id": "joinByField", "options": {"byField": "name", "mode": "outer"}}, {"id": "organize", "options": {"excludeByName": {"Time": true, "__name__": true, "__name__ #A": true, "__name__ #B": true, "__name__ #C": true, "__name__ #D": true, "__name__ (A)": true, "__name__ (B)": true, "__name__ (C)": true, "__name__ (D)": true, "__name__ 1": true, "__name__ 2": true, "__name__ 3": true, "__name__ 4": true}, "indexByName": {"Last update age (s)": 2, "Name": 0, "Restarts last 1h": 3, "Status": 1, "Uptime (s)": 4}, "renameByName": {"Value #A": "Status", "Value #B": "Last update age (s)", "Value #C": "Restarts last 1h", "Value #D": "Uptime (s)", "Value (A)": "Status", "Value (B)": "Last update age (s)", "Value (C)": "Restarts last 1h", "Value (D)": "Uptime (s)", "Value 1": "Status", "Value 2": "Last update age (s)", "Value 3": "Restarts last 1h", "Value 4": "Uptime (s)", "name": "Name"}}}], "type": "table"}, {"datasource": "Prometheus", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}, "unit": "none"}, "overrides": []}, "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0}, "id": 2, "options": {"legend": {"calcs": ["lastNotNull"], "displayMode": "table", "placement": "right", "showLegend": true}, "tooltip": {"mode": "single", "sort": "none"}}, "targets": [{"datasource": "Prometheus", "editorMode": "code", "expr": "sum by (name) (reality:svc:restarts_1h{name=~\"$name\"})", "legendFormat": "{{name}}", "range": true, "refId": "A"}], "title": "Restarts per hour", "type": "timeseries"}, {"datasource": "Prometheus", "fieldConfig": {"defaults": {"custom": {"align": "auto", "cellOptions": {"type": "auto"}, "inspect": false}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": [{"matcher": {"id": "byName", "options": "Status"}, "properties": [{"id": "mappings", "value": [{"options": {"0": {"text": "DOWN"}, "1": {"text": "UP"}}, "type": "value"}]}, {"id": "thresholds", "value": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}}, {"id": "custom.width", "value": 76}]}, {"matcher": {"id": "byName", "options": "Last update age (s)"}, "properties": [{"id": "unit", "value": "s"}, {"id": "custom.width", "value": 254}]}, {"matcher": {"id": "byName", "options": "Duration (ms)"}, "properties": [{"id": "unit", "value": "ms"}]}, {"matcher": {"id": "byName", "options": "Name"}, "properties": [{"id": "custom.width", "value": 251}]}]}, "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8}, "id": 4, "options": {"cellHeight": "sm", "footer": {"countRows": false, "fields": "", "reducer": ["sum"], "show": false}, "showHeader": true, "sortBy": []}, "pluginVersion": "10.4.5", "targets": [{"datasource": "Prometheus", "expr": "reality:e2e:ok{name=~\"$name\"}", "format": "table", "instant": true, "refId": "A"}, {"datasource": "Prometheus", "expr": "reality:e2e:last_run_age_seconds{name=~\"$name\"}", "format": "table", "instant": true, "refId": "B"}, {"datasource": "Prometheus", "expr": "reality:e2e:duration_ms{name=~\"$name\"}", "format": "table", "instant": true, "refId": "C"}], "title": "REALITY E2E status", "transformations": [{"id": "joinByField", "options": {"byField": "name", "mode": "outer"}}, {"id": "organize", "options": {"excludeByName": {"Time": true, "__name__": true, "__name__ #A": true, "__name__ #B": true, "__name__ #C": true, "__name__ (A)": true, "__name__ (B)": true, "__name__ (C)": true, "__name__ 1": true, "__name__ 2": true, "__name__ 3": true}, "indexByName": {"Duration (ms)": 3, "Last update age (s)": 2, "Name": 0, "Status": 1}, "renameByName": {"Value #A": "Status", "Value #B": "Last update age (s)", "Value #C": "Duration (ms)", "Value (A)": "Status", "Value (B)": "Last update age (s)", "Value (C)": "Duration (ms)", "Value 1": "Status", "Value 2": "Last update age (s)", "Value 3": "Duration (ms)", "name": "Name"}}}], "type": "table"}, {"datasource": "Prometheus", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "insertNulls": false, "lineInterpolation": "smooth", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "min": 0, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}, "unit": "ms"}, "overrides": []}, "gridPos": {"h": 8, "w": 12, "x": 12, "y": 8}, "id": 3, "options": {"legend": {"calcs": ["lastNotNull"], "displayMode": "table", "placement": "right", "showLegend": true}, "tooltip": {"mode": "single", "sort": "none"}}, "targets": [{"datasource": "Prometheus", "editorMode": "code", "expr": "reality:e2e:duration_ms{name=~\"$name\"}", "instant": false, "legendFormat": "{{name}}", "refId": "A"}], "title": "E2E duration", "type": "timeseries"}], "refresh": "30s", "schemaVersion": 39, "tags": ["reality", "xray", "vpn", "sing-box", "e2e"], "templating": {"list": [{"current": {"selected": false, "text": "All", "value": "$__all"}, "datasource": "Prometheus", "definition": "", "hide": 0, "includeAll": true, "label": "Node", "multi": true, "name": "name", "options": [], "query": "label_values(reality:svc:up, name)", "refresh": 2, "regex": "", "skipUrlSync": false, "sort": 1, "type": "query"}]}, "time": {"from": "now-24h", "to": "now"}, "timepicker": {"refresh_intervals": ["10s", "30s", "1m", "5m", "15m", "30m", "1h"]}, "timezone": "", "title": "REALITY: Status", "uid": "reality-table", "version": 3, "weekStart": ""}